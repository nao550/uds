# 理解力調査テストシステム

5問前後のアンケートと、チェックテストがある。

アンケートは一度終了すると再度表示されない。

チェックテストは特定のカテゴリのみ合格点になるまで何度でも再回答可能

集計ページでアンケート集計のダウンロードと、得点状況を確認できる

## 検討事項

ログインのチェックは Auth->chkLogined にて $_SESSION['sid'] == $_POST['sid'] でチェックしているがこれで十分か？

- アンケート分の追加フォームの作成
- トップページのデザイン
- データベースの設計

## log
    集計ページの作成
    問題ページの作成
    アンケートが集計できるようにする
    アンケート集計ページの作成
    アンケート集計関数
    問題管理ページの作成
    問題クラスの作成
    問題カテゴリに合格点まで表示するカテゴリ選択と達成点の追加
        問題カテゴリテンプレートページの修正
        問題カテゴリクラスの修正
    171118: アンケート編集、追加ページにキャンセルボタンの追加
    171118: 問題カテゴリ編集ページの完成
    171115: 問題カテゴリクラスの作成
    171114: アンケートクラス、登録関数の作成
    171114: アンケート集計クラスの作成
    171114: アンケート集計テーブルの作成
    171113: アンケートタイプ 3 の文字列回答の機能実装
    171113: cd を使うようにテストを修正
    171111: qst.num を削除、cdを使うように変更
    171109: アンケート表示まで完成、
    171109: index.php, index.tpl の作成
    171109: 更新と削除が動いていない？→動いた
    171108: アンケート追加画面の作成→追加画面はできた。
    追加画面は画面下に追加ボタンがあって、それを押したら確認画面の後に、qstadd.phpにPOSTして、POSTのデータを登録して、qst.php に戻る
    171031: アンケート削除→完成お
    171031: アンケート編集画面の作成→完成
    171031: アンケート管理ページの作成
    171031: qst.php -> AddQst() の作成→完成
    171031: getAllQst() のテスト作りたい→DBUnitの使いかた調査？
    171025: 管理者ログインチェックの完成、どうもややこしいやりかたをしている気がする。
    171024: Session.php, SessionTest.php ひととおり完成
    171024: User.php に CngUserPassword の追加
    171023: User.php と UserTest.php が動くようになった
    171020: Account から User に変更、admin のチェックをユーザレベルですることにした
    171005: qstlib.php -> GetAllQst() できた
    171005: qst.php の表示できた
    171003: アンケートライブラリの作成中

## テスト

テストは mysql に同じレイアウトでデータベースを作成して、実行する。


## DB

### アンケート文tb

    複数の選択肢は同じアンケート番号にする。
    qst
    cd, sirial, CD
    type, int, アンケートタイプ
        1：単一選択肢
        2：複数選択肢
        3：テキスト入力
    question, varchar(300), アンケート文
    ans, varchar(300), 解答選択肢
    
### 解答tb

    一人の一アンケートの解凍が1レコードになる。
    複数選択は区切り記号'|'を使って格納
    resp
    cd, sirial, CD
    uid, varchar(20), ユーザID(学籍番号？)
    qstcd, int, 
    type, int, アンケートタイプ
    ans, varchar(900), 解答選択肢|解凍選択肢|...
    regdate, date, 解答日

### 問題文tb

    exam
    
### 解答tb

    ans
